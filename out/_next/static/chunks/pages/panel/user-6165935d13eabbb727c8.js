(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[894],{11642:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var r=n(85893),i=n(41120),a=n(22318),o=n(41749),s=n(67294),l=n(39983),c=n(28274),d=n(73886),u=n(37067),h=n(86347),m=n(20196),p=n(12112),f=n(62822),x=n(50998),g=n(95757),j=n(55517),v=n(91027),b=(0,i.Z)((function(e){return{link:{color:"white",fontWeight:"bold"},drawerPaper:{position:"static",width:240,height:"100%",justifyContent:"space-between",backgroundColor:l.DM.gray},content:{height:"100%",display:"flex",flexDirection:"column",overflow:"auto",overflowX:"hidden",width:"100%",backgroundColor:l.DM.gray}}})),y=function(e){var t=e.setCurrentTab,n=e.currentTab,i=b(),a=(0,s.useContext)(v.Z).logout;return(0,r.jsxs)(p.ZP,{variant:"permanent",classes:{paper:i.drawerPaper},children:[(0,r.jsx)(f.Z,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)(x.Z,{button:!0,selected:0===n,onClick:function(){t(0)},children:(0,r.jsx)(g.Z,{className:i.link,primary:"Profile"})}),(0,r.jsx)(x.Z,{button:!0,selected:2===n,onClick:function(){t(2)},children:(0,r.jsx)(g.Z,{className:i.link,primary:"Files"})})]})}),(0,r.jsx)(j.Z,{}),(0,r.jsx)(f.Z,{children:(0,r.jsx)(x.Z,{button:!0,children:(0,r.jsx)(g.Z,{onClick:function(){return a()},primary:"Logout"})})})]})},Z=(0,i.Z)((function(e){return{root:{display:"flex",height:"100vh",overflow:"hidden"},inner:{display:"flex",paddingTop:"4.1rem",height:"100%",width:"100%"},link:{color:"white",fontWeight:"bold"},drawerPaper:{position:"static",width:240,height:"100%",justifyContent:"space-between",backgroundColor:l.DM.gray},content:{height:"100%",display:"flex",flexDirection:"column",overflow:"auto",overflowX:"hidden",width:"100%",backgroundColor:l.DM.gray}}})),w=(0,m.Z)((function(){var e=Z(),t=(0,s.useState)(0),n=t[0],i=t[1];return(0,r.jsx)("div",{className:e.root,children:(0,r.jsxs)("div",{className:e.inner,children:[(0,r.jsx)(h.Z,{}),(0,r.jsx)(y,{setCurrentTab:i,currentTab:n}),(0,r.jsx)("main",{className:e.content,children:(0,r.jsxs)(o.Z,{justify:"center",alignItems:"center",direction:"row",container:!0,style:{height:"85%"},children:[(0,r.jsx)(o.Z,{item:!0,xs:12,md:11,lg:11,justify:"center",style:{marginTop:u.Z.spacing(3),height:"8%"},children:(0,r.jsx)(a.Z,{style:{fontWeight:"bold",color:"white"},component:"h1",variant:"h4",children:"Profile"})}),(0,r.jsxs)(o.Z,{item:!0,xs:12,md:11,lg:11,style:{height:"100%"},children:[0===n&&(0,r.jsx)(c.Z,{type:l.nb.GUEST}),2===n&&(0,r.jsx)(d.Z,{})]})]})})]})})}))},20196:function(e,t,n){"use strict";var r=n(26265),i=n(85893),a=n(11163),o=n(67294),s=n(49361),l=n(31050),c=n(39983);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}t.Z=function(e){return function(t){var n=(0,a.useRouter)(),u=(0,o.useState)(!1),h=u[0],m=u[1];return(0,o.useEffect)((function(){var e=localStorage.getItem(s.De.TOKEN_NAME_INTERN);if(e){var t=(0,l.WX)(e);if(t.status){m(t.status);var r=t.jwtDecoded.usuario.type,i=r===c.jA.ADMIN,a=r===c.jA.SUPER_ADMIN,o=r===c.jA.GUEST;t.status&&(i&&(["/panel/admin"].includes(n.pathname)||n.replace("/panel/admin")),a&&(["/superadmin"].includes(n.pathname)||n.replace("/superadmin")),o&&(["/panel/user"].includes(n.pathname)||n.replace("/panel/user")))}else localStorage.removeItem(s.De.TOKEN_NAME_INTERN),n.replace("/")}else n.replace("/")}),[]),h?(0,i.jsx)(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t)):null}}},93989:function(e,t,n){"use strict";var r=n(85893),i=(n(67294),n(22318)),a=n(41749),o=n(282),s=n(41120),l=n(87623),c=n(59143),d=(0,s.Z)((function(e){return(0,l.Z)({paper:{margin:"0 auto 0 auto",maxWidth:1280,width:"40%",height:"50%",backgroundColor:e.palette.background.paper,padding:e.spacing(2,4,3)}})}));t.Z=function(e){var t=e.handleClose,n=e.handleOk,s=e.isOpen,l=e.title,u=e.subtitle,h=e.okText,m=e.cancelText,p=d(),f=(0,r.jsxs)("div",{className:p.paper,children:[(0,r.jsx)(i.Z,{variant:"h6",gutterBottom:!0,children:l}),(0,r.jsxs)(a.Z,{container:!0,spacing:3,direction:"column",children:[(0,r.jsx)(a.Z,{item:!0,xs:12,md:12,children:(0,r.jsx)(i.Z,{variant:"h6",gutterBottom:!0,children:u})}),(0,r.jsxs)(a.Z,{container:!0,spacing:2,justify:"flex-end",alignContent:"flex-end",children:[(0,r.jsx)(a.Z,{item:!0,children:(0,r.jsx)(o.Z,{size:"medium",onClick:t,variant:"contained",children:m})}),(0,r.jsx)(a.Z,{item:!0,children:(0,r.jsx)(o.Z,{size:"medium",color:"primary",onClick:n,variant:"contained",children:h})})]})]})]});return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(c.Z,{open:s,onClose:t,style:{display:"flex",justifyContent:"center",alignItems:"center"},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:f})})}},28274:function(e,t,n){"use strict";n.d(t,{Z:function(){return D}});var r=n(809),i=n.n(r),a=n(92447),o=n(85893),s=n(67294),l=n(41120),c=n(18463),d=n(79912),u=n(69826),h=n(33901),m=n(22318),p=n(41749),f=n(36253),x=n(87748),g=n(282),j=n(39983),v=n(73431),b=(0,l.Z)((function(e){return{root:{display:"flex",height:"100%",borderLeft:"1px solid",borderLeftColor:j.DM.GRAY_MEDIUM,paddingLeft:"2rem",flexDirection:"column"},information:{marginTop:"-0.4rem",marginBottom:"1.3rem"}}})),y=function(e){var t=e.type,n=(0,s.useContext)(v.ZP),r=n.profile,l=n.updateName,c=b(),d=(0,s.useState)(!0),u=d[0],h=d[1],y=(0,s.useState)(""),Z=y[0],w=y[1],C=(0,s.useState)(!1),E=C[0],k=C[1],N=(0,s.useState)(r.name),T=N[0],D=N[1],O=function(){h(!u),w(""),k(!1)};(0,s.useEffect)((function(){D(r.name)}),[]);var S=function(){var e=!0;return!T||0===T.trim().length||T.trim().length>=100?(k(!0),w("Ingrese un nombre v\xe1lido"),e=!1):T.trim().includes(" ")?(k(!0),w("No puedes incluir espacios"),e=!1):T.trim().length<5&&(k(!0),w("Deben ser al menos 5 caracteres."),e=!1),e},A=function(){var e=(0,a.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S()){e.next=6;break}return e.next=3,l(T.trim());case 3:0===(t=e.sent).status?D(t.name):D(r.name),O();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e="Invitaci\xf3n";return t===j.nb.ADMIN&&(e="Administrador"),t===j.nb.SUPER&&(e="Super administrador"),t===j.nb.GUEST&&(e="Invitado"),(0,o.jsx)(m.Z,{variant:"h5",gutterBottom:!0,style:{position:"relative",left:"-10px",textTransform:"uppercase"},children:(0,o.jsx)(x.Z,{fontWeight:"fontWeightBold",m:1,children:e})})};return(0,o.jsxs)("div",{className:c.root,children:[(0,o.jsx)(P,{}),(0,o.jsxs)("h3",{className:c.information,children:["Information ",(0,o.jsx)(g.Z,{onClick:O,variant:"contained",color:"primary",children:u?"Editar":"Cancelar"})," "]}),(0,o.jsxs)(p.Z,{container:!0,spacing:3,direction:"column",children:[(0,o.jsx)(p.Z,{item:!0,xs:12,md:12,children:(0,o.jsx)(f.Z,{error:E,helperText:Z,datatype:"text",onChange:function(e){k(!1),w(""),D(e.target.value)},placeholder:r.name,value:T,required:!0,id:"cardName",disabled:u,label:"Name",fullWidth:!0})}),(0,o.jsx)(p.Z,{item:!0,xs:12,md:12,children:(0,o.jsx)(f.Z,{value:r.email,disabled:!0,required:!0,label:"Email",fullWidth:!0})}),!u&&(0,o.jsx)(p.Z,{item:!0,xs:12,md:12,children:(0,o.jsx)(g.Z,{onClick:A,variant:"contained",color:"primary",children:"salvar"})})]})]})},Z=n(17812),w=n(93989),C=n(9669),E=n.n(C),k=function(e){var t=e.type,n=e.toggleEditAvatar,r=T(),i=(0,s.useContext)(v.ZP).profile;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(d.Z,{children:[(0,o.jsx)(h.Z,{src:i.thumbnail,alt:"Remy Sharp",className:r.large}),(0,o.jsx)("button",{onClick:n,className:r.buttonEdit,children:"Edit Avatar"})]}),(0,o.jsx)(y,{type:t})]})},N=function(e){var t=e.toggleEditAvatar,n="https://ocupath.readyplayer.me/",r=T(),l=(0,s.useState)(!1),c=l[0],d=l[1],h=(0,s.useContext)(v.ZP).updateUser,m=(0,s.useState)(null),p=m[0],f=m[1],x=function(e){n.includes(e.origin)&&(f(e.data),d(!0))},j=function(){var e=(0,a.Z)(i().mark((function e(){var t,n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!1),e.next=3,E().post("https://render.readyplayer.me/render",{model:p,scene:"halfbody-portrait-v1"});case 3:return t=e.sent,n=t.data,r=new v.yd({avatar:p,name:null,thumbnail:n.renders[0]}),e.next=8,h(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){return window.addEventListener("message",x,!1),function(){window.removeEventListener("message",x)}}),[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.Z,{cancelText:"Cancel",okText:"Sure",isOpen:c,title:"SAVE AVATAR",handleClose:function(){d(!1)},handleOk:j,subtitle:"Are you sure you want to save these changes?"}),(0,o.jsxs)("div",{className:r.rootIframe,children:[(0,o.jsx)("div",{className:r.header,children:(0,o.jsx)(Z.Z,{onClick:t,"aria-label":"delete",children:(0,o.jsx)(u.Z,{})})}),(0,o.jsx)("iframe",{className:r.iframe,src:n}),(0,o.jsx)("div",{className:r.button,children:null!==p&&(0,o.jsx)(g.Z,{onClick:function(){return d(!0)},variant:"contained",href:"#contained-buttons",children:"Save Changes"})})]})]})},T=(0,l.Z)((function(e){return{root:{display:"flex",height:"100%",padding:"2rem",borderTop:"2rem solid",borderTopColor:j.DM.GRAY_MEDIUM,borderBottom:"2rem solid",borderBottomColor:j.DM.GRAY_MEDIUM},rootIframe:{display:"flex",flex:1,flexDirection:"column",height:"100%"},iframe:{width:"100%",height:"82%"},header:{height:"8%"},button:{height:"10%",display:"flex",paddingRight:"1rem",justifyContent:"flex-end",alignItems:"center"},buttonEdit:{borderColor:"black",border:"solid 1px",textalign:"center",width:"100%",background:"transparent",borderRadius:"19pt",paddingTop:"0.12rem",cursor:"pointer",paddingBottom:"0.12rem","&:hover":{background:"#eeee"}},large:{width:e.spacing(12),height:e.spacing(12),marginBottom:"0.5rem",marginTop:"3rem"}}})),D=function(e){var t=e.type,n=(0,s.useContext)(v.ZP).getUserDetail,r=T();(0,s.useEffect)((function(){n()}),[]);var i=(0,s.useState)(!1),a=i[0],l=i[1],d=function(){l(!a)};return(0,o.jsxs)(c.Z,{className:r.root,children:[!a&&(0,o.jsx)(k,{toggleEditAvatar:d,type:t}),a&&(0,o.jsx)(N,{toggleEditAvatar:d})]})}},46397:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/panel/user",function(){return n(11642)}])}},function(e){e.O(0,[544,282,253,15,725,990,774,888,179],(function(){return t=46397,e(e.s=t);var t}));var t=e.O();_N_E=t}]);